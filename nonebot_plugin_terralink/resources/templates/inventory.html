{% extends "base.html" %}
{% import "macros.html" as macros with context %}

{% block content %}
<div class="panel-header">
    <span class="panel-title">ğŸ’ {{ data.playerName }} çš„èƒŒåŒ…</span>
</div>

<!-- [Layout Update] ä¼˜åŒ–å¸ƒå±€ï¼Œå·¦ä¾§ä¸»èƒŒåŒ…ï¼Œå³ä¾§å¤šåˆ—å¹¶æ’ -->
<div class="inventory-layout">

    <!-- å·¦ä¾§ï¼šä¸»èƒŒåŒ… (10x5 Grid) -->
    <div style="flex: 1;">
        <div class="section-title" style="margin-top: 0;">ç‰©å“æ </div>
        <div class="inventory-main-grid">
            {% for item in data.inventory %}
                {# å¦‚æœæ˜¯ç©ºæ§½ä½(id=0)ï¼Œä¹Ÿæ¸²æŸ“ä¸€ä¸ªç©ºæ ¼å­ä¿æŒç½‘æ ¼æ•´é½ #}
                {% if item.id == 0 %}
                <div class="item-slot" style="background-color: rgba(0,0,0,0.1); border-color: rgba(255,255,255,0.05);">
                </div>
                {% else %}
                {{ macros.item_slot(item) }}
                {% endif %}
            {% endfor %}

            {# è¡¥é½50ä¸ªæ ¼å­ (å¦‚æœæ•°æ®è¿”å›ä¸è¶³50) #}
            {% if data.inventory|length < 50 %} 
                {% for i in range(50 - data.inventory|length) %} 
                <div class="item-slot" style="background-color: rgba(0,0,0,0.1); border-color: rgba(255,255,255,0.05);"></div>
                {% endfor %}
            {% endif %}
        </div>
    </div>

    <!-- å³ä¾§ï¼šè£…å¤‡ä¸æ‚é¡¹ (æ¨ªå‘æ’åˆ—) -->
    <div class="inventory-sidebar">

        <!-- Column 1: è£…å¤‡æ  (Armor & Accessories) -->
        {% if data.armor %}
        <div class="sidebar-column">
            <div class="section-title" style="margin-top: 0;">è£…å¤‡</div>
            
            <!-- ä½¿ç”¨ sidebar-column å†…éƒ¨é»˜è®¤æ˜¯ column å‚ç›´æ’åˆ—ï¼Œç¬¦åˆæ¸¸æˆ UI -->
            {% for item in data.armor %}
                {{ macros.item_slot(item) }}
            {% endfor %}
        </div>
        {% endif %}

        <!-- Column 2: æ‚é¡¹/é’±å¸ (Misc) -->
        {% if data.misc %}
        <div class="sidebar-column">
            <div class="section-title" style="margin-top: 0;">æ‚é¡¹/é’±å¸</div>
            
            {% for item in data.misc %}
                {{ macros.item_slot(item) }}
            {% endfor %}
        </div>
        {% endif %}

    </div>
</div>

<!-- åº•éƒ¨å®¹å™¨ (ä¿æŒä¸å˜) -->
{% if data.piggy or data.vault %}
<div class="section-title">å­˜å‚¨å®¹å™¨</div>
<div class="row">
    {% if data.piggy %}
    <div class="col" style="background: rgba(255,100,100,0.1); padding: 5px; border-radius: 4px;">
        <span style="font-size: 12px; text-align: center;">ğŸ· çŒªçŒªå­˜é’±ç½</span>
        <div class="grid-container" style="justify-content: center;">
            {% for item in data.piggy %}
            {{ macros.item_slot(item) }}
            {% endfor %}
        </div>
    </div>
    {% endif %}

    {% if data.vault %}
    <div class="col" style="background: rgba(100,100,255,0.1); padding: 5px; border-radius: 4px;">
        <span style="font-size: 12px; text-align: center;">ğŸ”’ è™šç©ºä¿é™©åº“</span>
        <div class="grid-container" style="justify-content: center;">
            {% for item in data.vault %}
            {{ macros.item_slot(item) }}
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>
{% endif %}

{% endblock %}